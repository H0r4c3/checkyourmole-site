<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CheckYourMole ‚Äî AI Mole Classification Demo</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <header>
    <h1>CheckYourMole ‚Äî AI Mole Classification Demo</h1>
    <p class="tagline">Upload a mole image to see how AI analyzes it</p>
    <div class="disclaimer-banner">‚ö†Ô∏è Educational only. Not a medical diagnosis.</div>
  </header>

  <section class="upload-section">
    <div class="upload-box">

      <!-- Original image -->
      <div class="image-box">
        <h3>Original Image</h3>
        <img id="originalImage" src="" alt="Original preview" class="preview-image" />
        <label for="file-upload" class="custom-file-upload">Choose Image</label>
        <input id="file-upload" type="file" accept=".jpg,.jpeg,.png,image/*" />
        <p class="caption">Tap to upload or drag & drop</p>
      </div>

      <!-- Grad-CAM -->
      <div class="image-box">
        <h3>Grad-CAM Heatmap</h3>
        <img id="gradcamImage" src="" alt="Grad-CAM preview" class="preview-image" />
        <p class="caption">Model focus visualization</p>
      </div>
    </div>

    <!-- Analyze button + spinner -->
    <button id="analyzeBtn" class="analyze-button" disabled>Analyze Image</button>
    <div id="loadingSpinner" class="spinner">
      <div class="spinner-circle"></div>
      <p>Analyzing image...</p>
    </div>

    <p class="explanation">
      The AI model uses Grad-CAM to highlight areas of interest in the mole image. This helps visualize what the model is focusing on during classification.
    </p>
  </section>

  <!-- Results -->
  <section id="resultsSection" class="results">
    <div id="resultCard" class="result-card">
      <h2 id="diagnosisLabel">Diagnosis: -</h2>
      <p id="confidenceValue">Confidence: -</p>
    </div>
  </section>

  <footer>
    <p>Created by Horatiu Crista</p>
    <p>
      <a href="https://huggingface.co/horatiu-crista" target="_blank">ü§ó Hugging Face</a> |
      <a href="https://www.linkedin.com/in/horatiu-crista" target="_blank">üíº LinkedIn</a>
    </p>
    <p class="footer-disclaimer">
      ‚ö†Ô∏è This AI tool is intended solely for educational and research purposes. It does not provide medical advice, diagnosis, or treatment.
    </p>
  </footer>

  <!-- JS -->
  <script src="checkyourmole-api.js" defer></script>

  <!-- ‚úÖ Fixed inline script -->
  <script>
  const fileInput = document.getElementById('file-upload');
  const originalImage = document.getElementById('originalImage');
  const gradcamImage = document.getElementById('gradcamImage');
  const analyzeBtn = document.getElementById('analyzeBtn');

  fileInput.addEventListener('change', (e) => {
    const file = e.target.files[0];
    if (file) {
      // Show the new original image preview
      originalImage.src = URL.createObjectURL(file);

      // ‚úÖ Clear previous Grad-CAM and show placeholder text
      gradcamImage.src = '';
      gradcamImage.classList.add('placeholder');
      gradcamImage.alt = 'No heatmap yet';

      // Enable the Analyze button
      analyzeBtn.disabled = false;
    }
  });

  // When a new Grad-CAM image is loaded after analysis, remove placeholder style
  gradcamImage.addEventListener('load', () => {
    if (gradcamImage.src && !gradcamImage.src.endsWith('data:')) {
      gradcamImage.classList.remove('placeholder');
    }
  });
</script>


</body>
</html>
